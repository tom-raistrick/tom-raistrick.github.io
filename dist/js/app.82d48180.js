(function(t){function e(e){for(var n,s,o=e[0],i=e[1],u=e[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);l&&l(e);while(p.length)p.shift()();return c.push.apply(c,u||[]),r()}function r(){for(var t,e=0;e<c.length;e++){for(var r=c[e],n=!0,o=1;o<r.length;o++){var i=r[o];0!==a[i]&&(n=!1)}n&&(c.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},a={app:0},c=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="http://localhost:8080/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=i;c.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"00de":function(t,e,r){},"0650":function(t,e,r){},"0702":function(t,e,r){"use strict";var n=r("e196"),a=r.n(n);a.a},1:function(t,e){},"1efd":function(t,e,r){"use strict";var n=r("b83f"),a=r.n(n);a.a},2509:function(t,e,r){},"28e9":function(t,e,r){(function(e){r("99af"),r("a15b");var n=r("df7c"),a=r("ed18"),c=!1;c?(a.config({path:n.join(e,"../../.env.development.local")}),a.config({path:n.join(e,"../../.env.development")})):(a.config({path:n.join(e,"../../.env.production.local")}),a.config({path:n.join(e,"../../.env.production")})),a.config({path:n.join(e,"../../.env.local")}),a.config({path:n.join(e,"../../.env")});var s={protocol:Object({NODE_ENV:"production",BASE_URL:"http://localhost:8080/"}).VUE_APP_PROTOCOL||"http",port:Object({NODE_ENV:"production",BASE_URL:"http://localhost:8080/"}).VUE_APP_PORT||3e3,host:Object({NODE_ENV:"production",BASE_URL:"http://localhost:8080/"}).VUE_APP_HOST||"localhost",sessionMaxAge:864e5,secret:Object({NODE_ENV:"production",BASE_URL:"http://localhost:8080/"}).SECRET,clientId:Object({NODE_ENV:"production",BASE_URL:"http://localhost:8080/"}).CLIENT_ID,clientSecret:Object({NODE_ENV:"production",BASE_URL:"http://localhost:8080/"}).CLIENT_SECRET,stateKey:"spotify_auth_state",accessTokenKey:"spotify_access_token",refreshTokenKey:"spotify_refresh_token",userIdKey:"user_id",queueIdKey:"queue_id",spotifyServer:"https://api.spotify.com/v1"};s.origin=Object({NODE_ENV:"production",BASE_URL:"http://localhost:8080/"}).VUE_APP_ORIGIN||"http://localhost:8080",s.server=Object({NODE_ENV:"production",BASE_URL:"http://localhost:8080/"}).VUE_APP_SERVER||"".concat(s.protocol,"://").concat(s.host,":").concat(s.port),t.exports=s}).call(this,"/")},4819:function(t,e,r){},5387:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("modal",{attrs:{name:"error",classes:"error",adaptive:!0,width:"90%"}},[r("div",[r("h1",[t._v("Error")]),r("p",[t._v(t._s(t.$store.getters.error))])]),r("div",[r("button",{staticClass:"btn btn-standard",on:{click:t.hideError}},[t._v("Close")])])]),r("Nav"),r("div",{staticClass:"container"},[r("div",{staticClass:"content-container"},[r("div",{staticClass:"content"},[!t.queueId||t.notFound?r("div",[r("Home"),t.notFound?r("h1",{staticClass:"error-text"},[t._v(" Queue not found ")]):t._e()],1):r("div",[t.loading?r("clip-loader",{attrs:{color:"#1cca59",loading:!0}}):r("div",[t.owner?r("Manage"):t._e(),r("h2",{staticClass:"spacing-y"},[t._v("Queue link")]),r("p",{staticClass:"spacing-y"},[t._v(" Share this link with your friends so that they can add tracks to the queue. They do not need a Spotify account. ")]),r("div",{staticClass:"queue-id"},[r("p",[t._v(t._s(t.href))]),r("CopyButton",{attrs:{value:t.href,text:"Copy sharable link"}})],1),r("div",{staticClass:"spacing"},[r("div",{staticClass:"items"},[r("Current",{staticClass:"spacing-y"}),r("h2",[t._v("Up next")]),t.nextTrack?r("Track",{staticClass:"item-container",attrs:{track:t.nextTrack,current:!1}}):t._e(),r("h3",[t._v("In queue")]),r("p",[t._v("These songs will be shuffled between.")]),t._l(t.comingUp,(function(t){return r("Track",{key:t.id,staticClass:"item-container",attrs:{track:t,current:!1}})})),r("Search",{staticClass:"spacing-y"}),r("Tracks",{staticClass:"spacing-y"})],2)])],1)],1)])])]),t._m(0)],1)},c=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("footer",{staticClass:"footer"},[r("p",{staticClass:"footer-content"},[t._v(" Made by Mattias AhlsÃ©n. Powered by the Spotify web API and Vue.js. This is NOT an official Spotify application and is NOT under the Spotify brand. ")])])}],s=r("b383"),o=r.n(s),i=r("8055"),u=r.n(i),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"nav"},[r("div",{staticClass:"logo"},[r("img",{staticClass:"logo-image clickable",attrs:{src:"/logo.png"},on:{click:t.goHome}})]),t.authorized?r("div",{staticClass:"nav-content"},[r("button",{staticClass:"btn btn-secondary spacing-right",on:{click:t.logout}},[t._v("LOG OUT")]),r("p",{staticClass:"username"},[t._v(t._s(t.userId))])]):r("div",[r("a",{staticClass:"btn btn-secondary spacing-right",attrs:{href:t.loginUrl}},[t._v(" CONNECT TO SPOTIFY ")])])])},d=[],p=r("28e9"),h=!1,f={server:h?p.server:p.origin,spotifyServer:"https://api.spotify.com/v1"},v={data:function(){return{}},computed:{loginUrl:function(){return f.server+"/login?"+o.a.stringify({redirect:window.location.origin+window.location.pathname})},authorized:function(){return this.$store.getters.authorized},userId:function(){return this.$store.state.auth.userId}},methods:{logout:function(){this.$store.dispatch("logout")},goHome:function(){this.$router.push({name:"home"})}}},g=v,m=(r("1efd"),r("2877")),b=Object(m["a"])(g,l,d,!1,null,"fc8dd636",null),y=b.exports,k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"manage"},[r("Controls"),r("div",{staticClass:"options"},[r("Devices"),r("button",{staticClass:"btn btn-standard btn-error delete-button",on:{click:t.deleteQueue}},[t._v(" Delete queue ")])],1)],1)},_=[],w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"controls"},[r("font-awesome-icon",{staticClass:"clickable-icon",attrs:{icon:"fast-backward",size:"3x"},on:{click:function(e){return e.preventDefault(),t.previous(e)}}}),t.isPlaying?r("font-awesome-icon",{staticClass:"play clickable-icon",attrs:{icon:"pause-circle",size:"4x"},on:{click:function(e){return e.preventDefault(),t.pause(e)}}}):r("font-awesome-icon",{staticClass:"play clickable-icon",attrs:{icon:"play-circle",size:"4x"},on:{click:function(e){return e.preventDefault(),t.play(e)}}}),r("font-awesome-icon",{staticClass:"clickable-icon",attrs:{icon:"fast-forward",size:"3x"},on:{click:function(e){return e.preventDefault(),t.next(e)}}})],1)},O=[],C=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("96cf"),r("2f62")),T={state:{authorized:!1,userId:null},getters:{serverFetchOptions:function(t){return{credentials:"include",headers:{"Content-type":"application/json"}}},spotifyFetchOptions:function(t,e,r,n){return{headers:{Authorization:"Bearer "+n.queueAccessToken}}},authorized:function(t){return t.authorized}},actions:{authenticate:function(t){t.state;var e=t.commit,r=t.getters;t.dispatch;return fetch(f.server+"/authenticate",r.serverFetchOptions).then(L).then((function(t){var r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t.json());case 2:return r=n.sent,e("userId",r.userId),e("authorized",r.authorized),n.abrupt("return",r);case 6:case"end":return n.stop()}}))}))},logout:function(t){t.state;var e=t.commit,r=t.getters;return fetch(f.server+"/logout",r.serverFetchOptions).then(L).then((function(t){e("authorized",!1),e("owner",!1),e("userId",null)}))}},mutations:{authorized:function(t,e){t.authorized=e},userId:function(t,e){t.userId=e}}},P=(r("a4d3"),r("99af"),r("4de4"),r("b0c0"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3"));function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function j(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){Object(P["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var x={state:{loading:!1,notFound:!1,owner:!1,accessToken:null,addedTracks:[]},getters:{owner:function(t){return t.owner}},actions:{fetchQueue:function(t){t.state;var e=t.commit,r=t.dispatch,n=t.getters;return e("loadingQueue",!0),fetch(F("/queue/data"),n.serverFetchOptions).then((function(t){return 404===t.status?e("notFound",!0):e("notFound",!1),t})).then(L).then((function(t){var n;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(t.json());case 2:return n=a.sent,e("owner",n.owner),n.accessToken&&e("accessToken",n.accessToken),r("fetchCurrent").catch(A),a.abrupt("return",n);case 7:case"end":return a.stop()}}))})).finally((function(){return e("loadingQueue",!1)}))},newQueue:function(t){t.state,t.commit;var e=t.dispatch,r=t.getters;return fetch(f.server+"/newQueue",r.serverFetchOptions).then(L).then((function(t){var r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t.json());case 2:return r=n.sent,ae.push({name:"queue",params:{queueId:r.queueId}}).catch((function(t){if("NavigationDuplicated"!==t.name)throw t;e("fetchQueue").catch(A)})),n.abrupt("return",r.queueId);case 5:case"end":return n.stop()}}))}))},deleteQueue:function(t){t.state,t.commit,t.dispatch;var e=t.getters;return fetch(F("/queue/delete"),e.serverFetchOptions).then(L).then((function(){ae.push("/")}))},addTrack:function(t,e){t.state;var r=t.commit,n=(t.dispatch,t.getters);return fetch(F("/queue/track"),j({},n.serverFetchOptions,{method:"POST",body:JSON.stringify({trackId:e.id})})).then(L).then((function(t){r("addTrack",e)}))}},mutations:{loadingQueue:function(t,e){t.loading=e},addTrack:function(t,e){t.addedTracks=t.addedTracks.concat([e])},owner:function(t,e){t.owner=e},accessToken:function(t,e){t.accessToken=e},notFound:function(t,e){t.notFound=e}}},$={state:{currentTrack:null,loading:!1,nextTrack:null,comingUp:null},getters:{currentTrack:function(t){return t.currentTrack}},actions:{fetchCurrent:function(t){t.state;var e=t.commit,r=(t.dispatch,t.getters),n="/queue/current";return e("loadingCurrent",!0),fetch(F(n),r.serverFetchOptions).then(L).then((function(t){var r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t.json());case 2:return r=n.sent,r.trackData?(e("currentTrack",r.trackData),e("progress",r.progress),e("isPlaying",r.isPlaying)):e("currentTrack",null),n.abrupt("return",r);case 5:case"end":return n.stop()}}))})).finally((function(){return e("loadingCurrent",!1)}))}},mutations:{currentTrack:function(t,e){t.currentTrack=e},loadingCurrent:function(t,e){t.loading=e},nextTrack:function(t,e){t.nextTrack=e},comingUp:function(t,e){t.comingUp=e}}};function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){Object(P["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var I={state:{isPlaying:!1,progress:0,liveProgress:0,deviceId:null,deviceError:null},getters:{isPlaying:function(t){return t.isPlaying},progress:function(t){return t.progress},liveProgress:function(t){return t.liveProgress}},actions:{playNext:function(t){var e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t.state,t.commit,e=t.dispatch,t.getters,r.abrupt("return",e("control","next"));case 2:case"end":return r.stop()}}))},playPrevious:function(t){var e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t.state,t.commit,e=t.dispatch,t.getters,r.abrupt("return",e("control","previous"));case 2:case"end":return r.stop()}}))},pause:function(t){var e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t.state,t.commit,e=t.dispatch,t.getters,r.abrupt("return",e("control","pause"));case 2:case"end":return r.stop()}}))},resume:function(t){var e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t.state,t.commit,e=t.dispatch,t.getters,r.abrupt("return",e("control","resume"));case 2:case"end":return r.stop()}}))},control:function(t,e){var r,n,a,c;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:if(r=t.state,n=t.commit,t.dispatch,a=t.getters,r.deviceId){s.next=3;break}return s.abrupt("return",n("deviceError","No selected device"));case 3:return c="/spotify/"+e,s.abrupt("return",fetch(F(c),q({},a.serverFetchOptions)).then(L));case 5:case"end":return s.stop()}}))}},mutations:{isPlaying:function(t,e){t.isPlaying=e},progress:function(t,e){t.progress=e,t.liveProgress=e},liveProgress:function(t,e){t.liveProgress=e},deviceId:function(t,e){t.deviceId=e},deviceError:function(t,e){t.deviceError=e}}},D={state:{tracks:null,loading:!1},getters:{},actions:{searchTracks:function(t,e){t.state;var r=t.commit,n=(t.dispatch,t.getters);return r("loadingTracks",!0),fetch(f.server+"/spotify/search?"+o.a.stringify({q:e,queueId:z()}),n.serverFetchOptions).then(L).then((function(t){var e;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t.json());case 2:return e=n.sent,r("tracks",e.tracks.items),n.abrupt("return",e);case 5:case"end":return n.stop()}}))})).finally((function(){return r("loadingTracks",!1)}))}},mutations:{tracks:function(t,e){t.tracks=e},loadingTracks:function(t,e){t.loading=e}}};n["a"].use(C["a"]);var R=new C["a"].Store({state:{error:null},getters:{error:function(t){return t.error||""}},modules:{auth:T,queue:x,track:$,player:I,search:D},mutations:{error:function(t,e){e.message?t.error=e.message:t.error=e},clearError:function(t){t.error=null}}}),N={},Q=R.dispatch;R.dispatch=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0];return N[n]?N[n]:(N[n]=Q.apply(R,e).finally((function(){return N[n]=null})),N[n])};var U=R,L=function(t){var e,r,n;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:if(!(t.status>=400&&t.status<600)){a.next=16;break}return e=401===t.status?"You must be connected to Spotify to do that":"An error has occured on the server.",a.prev=2,a.next=5,regeneratorRuntime.awrap(t.json());case 5:r=a.sent,"string"===typeof r.error&&(e=r.error),a.next=11;break;case 9:a.prev=9,a.t0=a["catch"](2);case 11:throw n=new Error(e),n.status=t.status,n;case 16:return a.abrupt("return",t);case 17:case"end":return a.stop()}}),null,null,[[2,9]])},A=function(t){return U.commit("error",t)},F=function(t){var e=new URL(f.server+t);return e.searchParams.append("queueId",ae.currentRoute.params.queueId),e},z=function(){return ae.currentRoute.params.queueId},V={credentials:"include",headers:{"Content-type":"application/json"}},M={computed:{isPlaying:function(){return this.$store.getters.isPlaying},onQueue:function(){return this.$store.getters.onQueue}},methods:{play:function(){this.$store.dispatch("resume").catch(A)},pause:function(){this.$store.dispatch("pause").catch(A)},next:function(){this.$store.dispatch("playNext").catch(A)},previous:function(){this.$store.dispatch("playPrevious").catch(A)},showErr:A}},B=M,H=(r("ccd5"),Object(m["a"])(B,w,O,!1,null,"4a840514",null)),K=H.exports,J=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"devices"},[r("p",{staticClass:"spacing-y"},[t._v("Have Spotify open on the device you wish to use.")]),t.loading?r("clip-loader",{attrs:{loading:!0,color:"#1cca59"}}):r("div",[r("div",{staticClass:"select-container"},[t.devices?r("multiselect",{staticClass:"clickable select-device",attrs:{searchable:!1,closeOnSelect:!0,options:t.devices,multiple:!1,allowEmpty:!1,showLabels:!1,label:"name",placeholder:"Select device"},scopedSlots:t._u([{key:"singleLabel",fn:function(e){return[r("span",{staticClass:"label"},[t._v(t._s(e.option.name))])]}}],null,!1,3098459551),model:{value:t.device,callback:function(e){t.device=e},expression:"device"}}):t._e(),r("font-awesome-icon",{staticClass:"clickable-icon sync",attrs:{icon:"sync"},on:{click:t.fetchDevices}})],1),t.devices?t._e():r("p",{staticClass:"error-text"},[t._v("Error loading devices")]),t.deviceError?r("p",{staticClass:"error-text"},[t._v(t._s(t.deviceError))]):t._e()])],1)},G=[];r("7db0");function Y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function W(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(r),!0).forEach((function(e){Object(P["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var X={data:function(){return{devices:null,loading:!1,device:null}},computed:{deviceError:function(){return this.$store.state.player.deviceError}},watch:{device:function(t,e){var r=this;t&&!this.loading&&this.sendDevice(t.id).then((function(e){r.$store.commit("deviceId",t.id),r.$store.commit("deviceError",null)})).catch((function(t){r.device=e,A(t)}))}},created:function(){this.fetchDevices().catch(A)},methods:{importSpotifySdk:function(){var t=document.createElement("script");t.setAttribute("src","https://sdk.scdn.co/spotify-player.js"),document.head.appendChild(t),!0},fetchDevices:function(){var t=this;this.loading=!0,this.devices=null;var e="/spotify/devices";return fetch(F(e),V).then(L).then((function(e){var r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(e.json());case 2:r=n.sent,t.devices=r.devices.filter((function(t){return!t.is_restricted})),0===r.devices.length&&t.$store.commit("deviceError","No available devices found."),r.deviceId&&(t.$store.commit("deviceId",r.deviceId),t.device=t.devices.find((function(t){return t.id===r.deviceId})));case 6:case"end":return n.stop()}}))})).finally((function(){return t.loading=!1}))},sendDevice:function(t){var e="/spotify/device";return fetch(F(e),W({},V,{method:"POST",body:JSON.stringify({id:t})})).then(L)}}},Z=X,tt=(r("0702"),Object(m["a"])(Z,J,G,!1,null,"9b2885b0",null)),et=tt.exports,rt={components:{Controls:K,Devices:et},computed:{},methods:{deleteQueue:function(){this.$store.dispatch("deleteQueue").catch(A)}}},nt=rt,at=(r("9a52"),Object(m["a"])(nt,k,_,!1,null,"626864dd",null)),ct=at.exports,st=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h2",[t._v("Currently playing")]),r("div",{staticClass:"item-container"},[t.loading?r("clip-loader",{staticClass:"spacing",attrs:{color:"#1cca59",loading:!0}}):t.currentTrack?r("Track",{attrs:{track:t.currentTrack,current:!0}}):r("div",{staticClass:"queue-empty spacing"},[r("p",[t._v("Queue is empty")]),r("font-awesome-icon",{staticClass:"clickable-icon sync",attrs:{icon:"sync"},on:{click:t.fetchCurrent}})],1)],1)])},ot=[],it=r("da7a"),ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.current?r("div",{staticClass:"progress",style:{right:t.remaining+"%"}}):t._e(),r("div",{staticClass:"item"},[r("div",{staticClass:"item-left"},[r("h1",[t._v(t._s(t.track.name))]),t._l(t.track.artists,(function(e){return r("h2",{key:e.id},[t._v(t._s(e.name))])})),r("p",{staticClass:"popularity"},[t._v("Popularity on Spotify: "),r("strong",{style:{color:t.popularity}},[t._v(t._s(t.track.popularity))])])],2),r("div",[t.track.album.images&&3===t.track.album.images.length?r("img",{attrs:{src:t.track.album.images[2].url}}):t._e()])])])},lt=[],dt={props:["track","current"],data:function(){return{updateProgressInterval:null}},computed:{progress:function(){return this.$store.getters.liveProgress},isPlaying:function(){return this.$store.getters.isPlaying},remaining:function(){return 100*(1-this.progress/this.track.duration_ms)},popularity:function(){var t=255*(1-this.track.popularity/100),e=255*this.track.popularity/100;return"rgb(".concat(t,", ").concat(e,", 0)")}},created:function(){var t=this,e=60;this.updateProgressInterval&&clearInterval(this.updateProgressInterval),this.updateProgressInterval=setInterval((function(){t.isPlaying&&t.current&&t.$store.commit("liveProgress",t.$store.getters.liveProgress+1e3/e)}),1e3/e)},destroyed:function(){clearInterval(this.updateProgressInterval),this.updateProgressInterval=null}},pt=dt,ht=(r("f9bc"),Object(m["a"])(pt,ut,lt,!1,null,"138e1760",null)),ft=ht.exports,vt={components:{Track:ft,ClipLoader:it["a"]},computed:{loading:function(){return this.$store.state.track.loading||this.$store.state.queue.loading},currentTrack:function(){return this.$store.state.track.currentTrack},currentlyPlayingData:function(){return this.$store.state.player.currentlyPlaying},onQueue:function(){return this.$store.getters.onQueue}},methods:{fetchCurrent:function(){this.$store.dispatch("fetchCurrent").catch(A)}}},gt=vt,mt=(r("d7f4"),Object(m["a"])(gt,st,ot,!1,null,"0de6a4d0",null)),bt=mt.exports,yt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.loadingTracks?r("clip-loader",{staticClass:"spacing",attrs:{color:"#1cca59",loading:!0}}):t._e(),t.tracks?r("div",[t._l(t.tracks,(function(e){return r("div",{key:e.id,staticClass:"item-container"},[r("Track",{attrs:{track:e}}),r("button",{staticClass:"btn btn-standard spacing right",attrs:{disabled:t.addedTracks.includes(e)},on:{click:function(){return t.addTrack(e)}}},[t._v(t._s(t.addedTracks.includes(e)?"Added":"Add to queue"))])],1)})),r("div",{staticClass:"clear-tracks spacing-y"},[r("button",{staticClass:"btn btn-standard right",on:{click:t.clearTracks}},[t._v("Clear")])])],2):t._e()],1)},kt=[],_t=(r("caad"),r("2532"),r("841c"),{components:{Track:ft,ClipLoader:it["a"]},computed:{addedTracks:function(){return this.$store.state.queue.addedTracks},loadingTracks:function(){return this.$store.state.search.loading},tracks:function(){return this.$store.state.search.tracks}},methods:{addTrack:function(t){this.addedTracks.includes(t)||this.$store.dispatch("addTrack",t).catch(A)},clearTracks:function(){this.$store.commit("tracks",null)}}}),wt=_t,Ot=Object(m["a"])(wt,yt,kt,!1,null,null,null),Ct=Ot.exports,Tt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("form",{staticClass:"search-container spacing-y",on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[r("div",{staticClass:"search-bar-container spacing-right"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.searchString,expression:"searchString"}],staticClass:"search-bar",attrs:{type:"search",placeholder:"Search tracks..."},domProps:{value:t.searchString},on:{input:function(e){e.target.composing||(t.searchString=e.target.value)}}}),t.searchString.length>0?r("div",{staticClass:"clear"},[r("font-awesome-icon",{staticClass:"clear-icon clickable-icon",attrs:{icon:"times",size:"2x"},on:{click:function(e){e.preventDefault(),t.searchString=""}}})],1):t._e()]),r("button",{staticClass:"btn btn-standard search-button",attrs:{type:"submit"}},[t._v("Search")])])])},Pt=[],Et={data:function(){return{searchString:""}},methods:{search:function(){this.searchString&&this.$store.dispatch("searchTracks",this.searchString).catch(A)}}},jt=Et,xt=(r("bb13"),Object(m["a"])(jt,Tt,Pt,!1,null,"d430359a",null)),$t=xt.exports,St=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.value,expression:"value",arg:"copy"},{name:"tooltip",rawName:"v-tooltip",value:{content:"Copied to clipboard",classes:["copied-tooltip"],trigger:"manual",delay:{hide:500},show:t.show},expression:"{\n    content: 'Copied to clipboard',\n    classes: ['copied-tooltip'],\n    trigger: 'manual',\n    delay: {\n      hide: 500,\n    },\n    show,\n  }"}],staticClass:"btn btn-standard",on:{click:t.showTooltip}},[t._v(" "+t._s(t.text)+" ")])},qt=[],It={props:["value","text"],data:function(){return{show:!1}},methods:{showTooltip:function(){var t=this;this.show=!0,setTimeout((function(){return t.show=!1}),1e3)}}},Dt=It,Rt=Object(m["a"])(Dt,St,qt,!1,null,null,null),Nt=Rt.exports,Qt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("div",[t.authorized?r("button",{staticClass:"btn btn-primary btn-big spacing-x",on:{click:t.newQueue}},[t._v(" Create new queue ")]):r("div",[r("a",{staticClass:"btn btn-primary btn-big spacing-x",attrs:{href:t.loginUrl}},[t._v(" Connect to Spotify ")]),r("p",{staticClass:"spacing-y"},[t._v("...to create queue")])])]),r("div",{staticClass:"description"},[r("h3",[t._v("How to use")]),t._m(0),t._m(1),r("h4",[t._v("New features:")]),t._m(2),r("p",[t._v(" To report bugs, or if you have suggestions of new features, either go to the "),r("a",{attrs:{target:"_blank",href:"https://github.com/mattiasahlsen/spotify-queue"}},[t._v(" github page ")]),r("br"),t._v(" or email me at "),r("a",{attrs:{target:"_blank"},on:{click:function(e){return e.preventDefault(),t.openMail(e)}}},[t._v(" mattias.ahlsen@gmail.com ")])])])])},Ut=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ol",[r("li",[t._v("Connect to Spotify.")]),r("li",[t._v("Create new queue.")]),r("li",[t._v("Share the queue link with your friends.")]),r("li",[t._v("Everybody adds tracks.")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"perks"},[r("li",[t._v(" The queue is fair! Everybody has an equal chance to get their song next. ")]),r("li",[t._v("Only the host of the queue needs a Spotify account!")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[t._v("Now fading to the next song is supported.")]),r("li",[t._v("Displays next song and the upcoming songs in the queue.")])])}],Lt={data:function(){return{queueLink:"",badQueueLink:!1}},computed:{authorized:function(){return this.$store.getters.authorized},loginUrl:function(){return f.server+"/login?"+o.a.stringify({redirect:window.location.origin+window.location.pathname})}},methods:{openMail:function(){window.location.href="mailto:mattias.ahlsen@gmail.com?subject=Subject&body=Message%20goes%20here"},connect:function(){var t,e=this.queueLink.includes("http")?this.queueLink:"http://"+this.queueLink;try{t=new URL(e)}catch(r){return void(this.badQueueLink=!0)}t.origin===window.location.origin&&"/"!==t.pathname?(this.badQueueLink=!1,t.pathname!==window.location.pathname&&this.$router.push(t.pathname)):this.badQueueLink=!0},newQueue:function(){return this.$store.dispatch("newQueue").catch(A)}}},At=Lt,Ft=(r("63a4"),Object(m["a"])(At,Qt,Ut,!1,null,"9bc089ae",null)),zt=Ft.exports,Vt={name:"app",components:{Tracks:Ct,Track:ft,Nav:y,Manage:ct,Current:bt,Search:$t,CopyButton:Nt,Home:zt},data:function(){return{error:null,queue:[],href:window.location.href,socket:null}},watch:{"$store.state.error":function(t){t&&this.displayError()},queueId:function(t){this.href=window.location.href,this.$store.commit("notFound",!1),this.fetchQueue(),this.socket.emit("queue",t)}},computed:{nextTrack:function(){return console.log(this.$store.state.track.nextTrack),this.$store.state.track.nextTrack},comingUp:function(){return this.$store.state.track.comingUp},loading:function(){return this.$store.state.queue.loading},queueId:function(){return this.$route.params.queueId},notFound:function(){return this.$store.state.queue.notFound},owner:function(){return this.$store.getters.owner},onQueue:function(){return this.$store.getters.onQueue}},created:function(){var t=this;this.$route.query.error&&A(this.$route.query.error),this.authenticate().then((function(){t.fetchQueue();var e=u()(f.server);t.socket=e,t.queueId&&e.emit("queue",t.queueId),e.on("status",(function(e){t.$store.commit("progress",e.progress),t.$store.commit("isPlaying",e.isPlaying),e.track&&t.$store.commit("currentTrack",e.track),e.nextSong&&t.$store.commit("nextTrack",e.nextSong),e.comingUp&&t.$store.commit("comingUp",e.comingUp)})),e.on("disconnect",(function(t){}))})).catch(A)},methods:{fetchQueue:function(){this.queueId&&this.$store.dispatch("fetchQueue").catch((function(t){if(404!==t.status)throw t})).catch(A)},play:function(){this.$store.dispatch("play").catch(A)},authenticate:function(){return this.$store.dispatch("authenticate")},displayError:function(t){this.$modal.show("error")},hideError:function(){this.$store.commit("clearError"),this.$modal.hide("error")},showErr:A}},Mt=Vt,Bt=(r("5c0b"),Object(m["a"])(Mt,a,c,!1,null,null,null)),Ht=Bt.exports,Kt=r("1881"),Jt=r.n(Kt),Gt=r("8c4f"),Yt=r("4eb5"),Wt=r.n(Yt),Xt=r("e37d"),Zt=r("8e5f"),te=r.n(Zt),ee=(r("e607"),r("ecee")),re=r("c074"),ne=r("ad3d");r.d(e,"router",(function(){return ae})),n["a"].component("clip-loader",it["a"]),n["a"].component("font-awesome-icon",ne["a"]),n["a"].component("multiselect",te.a),n["a"].use(Jt.a,{dialog:!0}),n["a"].use(Wt.a),n["a"].use(Xt["a"]),n["a"].use(Gt["a"]),n["a"].config.productionTip=!1,ee["c"].add(re["e"]),ee["c"].add(re["d"]),ee["c"].add(re["b"]),ee["c"].add(re["a"]),ee["c"].add(re["f"]),ee["c"].add(re["c"]),ee["c"].add(re["g"]);var ae=new Gt["a"]({mode:"history",routes:[{path:"/",name:"home"},{path:"/:queueId",name:"queue"}]});new n["a"]({render:function(t){return t(Ht)},store:U,router:ae}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var n=r("5387"),a=r.n(n);a.a},"615e":function(t,e,r){},"63a4":function(t,e,r){"use strict";var n=r("615e"),a=r.n(n);a.a},"9a52":function(t,e,r){"use strict";var n=r("ae4b"),a=r.n(n);a.a},ae4b:function(t,e,r){},b83f:function(t,e,r){},bb13:function(t,e,r){"use strict";var n=r("4819"),a=r.n(n);a.a},ccd5:function(t,e,r){"use strict";var n=r("2509"),a=r.n(n);a.a},d7f4:function(t,e,r){"use strict";var n=r("00de"),a=r.n(n);a.a},e196:function(t,e,r){},f9bc:function(t,e,r){"use strict";var n=r("0650"),a=r.n(n);a.a}});
//# sourceMappingURL=app.82d48180.js.map